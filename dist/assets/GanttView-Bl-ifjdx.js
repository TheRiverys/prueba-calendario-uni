import{r as q,t as $,c as W,e as u,p as f,m as y,n as C,j as e,y as Z,i as B,o as F}from"./index-6Wjq4IYt.js";import{s as h,e as w,c as z,i as I,C as _,a as J,b as K}from"./chevron-right-CstuOGld.js";function V(c,x){var l;q(1,arguments);var j=c||{},b=$(j.start),v=$(j.end),d=v.getTime();if(!(b.getTime()<=d))throw new RangeError("Invalid interval");var p=[],m=b;m.setHours(0,0,0,0);var a=Number((l=void 0)!==null&&l!==void 0?l:1);if(a<1||isNaN(a))throw new RangeError("`options.step` must be a number greater than 1");for(;m.getTime()<=d;)p.push($(m)),m.setDate(m.getDate()+a),m.setHours(0,0,0,0);return p}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=W("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=W("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),ee=({schedule:c})=>{const x=new Date,[l,j]=u.useState(1),[b,v]=u.useState(h(x)),d=l>=1?40:20,p=30,m=p*d,a=u.useMemo(()=>{if(c.length===0){const i=h(x),g=w(x);return{start:i,end:g,days:V({start:i,end:g})}}const t=c.flatMap(i=>[i.startDate,f(i.date)]),s=new Date(Math.min(...t.map(i=>i.getTime()))),r=new Date(Math.max(...t.map(i=>i.getTime())));let o,n;return l>=1?(o=h(b),n=w(z(o,l>=2?2:4))):(o=h(s),n=w(r)),o>s&&(o=h(s)),n<r&&(n=w(r)),{start:o,end:n,days:V({start:o,end:n})}},[c,b,l,x]),R=Math.max((a.days.length||p)*d,m),T=u.useMemo(()=>{const t={};return c.forEach(s=>{t[s.subject]||(t[s.subject]={subject:s.subject,color:s.color,items:[]}),t[s.subject].items.push(s)}),Object.values(t)},[c]),M=u.useMemo(()=>{const t=[];return T.forEach(s=>{t.push({type:"subject",key:`subject-${s.subject}`,subject:s.subject,color:s.color}),s.items.forEach(r=>{t.push({type:"item",key:`item-${r.id}`,item:r,color:s.color})})}),t},[T]),D=t=>{if(a.days.length===0)return 0;const s=a.days.findIndex(r=>I(r,t));return s!==-1?s:t<a.days[0]?0:t>a.days[a.days.length-1]?a.days.length-1:0},k=t=>D(t)*d,L=t=>k(t)+d/2,A=(t,s)=>{const r=D(t),o=D(s);return(Math.max(o-r,0)+1)*d},E=a.days.findIndex(t=>I(t,x)),N=E>=0?k(a.days[E])+d/2:null,H=u.useMemo(()=>{if(a.days.length===0)return[];const t=[];let s=y(a.days[0],"MMMM yyyy",{locale:C}),r=0;return a.days.forEach((o,n)=>{const i=y(o,"MMMM yyyy",{locale:C});i!==s&&(t.push({start:r*d,width:(n-r)*d,color:"bg-gray-100",studyDays:0,warning:!1,month:s}),s=i,r=n),n===a.days.length-1&&t.push({start:r*d,width:(n-r+1)*d,color:"bg-gray-100",studyDays:0,warning:!1,month:i})}),t},[a.days,d]),S=t=>{const s=l>=1?1:3;v(r=>t==="next"?z(r,s):K(r,s))},O=t=>{const s=Math.max(.5,Math.min(2,t));if(j(s),c.length>0){const r=c.flatMap(n=>[n.startDate,f(n.date)]),o=new Date(Math.min(...r.map(n=>n.getTime())));v(h(o))}},G=()=>l>=2?{label:"Zoom+",description:"Vista detallada"}:l>=1?{label:"Normal",description:"Vista estándar"}:{label:"Overview",description:"Vista general"},P=t=>{const s=t.getDay();return s===0||s===6};return e.jsxs("div",{className:"bg-card border rounded-lg shadow-sm",children:[e.jsx("div",{className:"px-6 py-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-foreground flex items-center",children:[e.jsx(Z,{className:"w-5 h-5 mr-2"}),"Vista Gantt - Cronograma de Estudio"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Visualización temporal de los períodos de estudio recomendados para cada entrega"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>O(l-.5),className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Alejar vista",children:e.jsx(U,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-2 py-1 bg-muted rounded text-sm font-medium",children:G().label}),e.jsx("button",{onClick:()=>O(l+.5),className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Acercar vista",children:e.jsx(Q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-1 border-l pl-2",children:[e.jsx("button",{onClick:()=>S("prev"),className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Mes anterior",children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S("next"),className:"p-2 hover:bg-muted rounded-lg transition-colors",title:"Mes siguiente",children:e.jsx(J,{className:"w-4 h-4"})})]})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-56 shrink-0",children:[e.jsx("div",{className:"h-12 flex items-center font-medium text-foreground border-b border-border",children:"Materia / Entrega"}),M.map(t=>t.type==="subject"?e.jsxs("div",{className:"h-12 flex items-center border-b border-border font-medium text-foreground",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${t.color} mr-2`}),t.subject]},t.key):e.jsx("div",{className:"h-10 flex items-center border-b border-border/50 text-sm text-muted-foreground pl-6",children:t.item.name},t.key))]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsxs("div",{className:"relative",style:{minWidth:`${R}px`},children:[e.jsxs("div",{className:"border-b border-border",children:[e.jsx("div",{className:"flex border-b border-border/50 text-xs font-medium text-foreground h-6",children:H.map(t=>e.jsx("div",{className:"flex items-center px-2 first:pl-0",style:{width:`${t.width}px`},children:t.month},t.month))}),e.jsxs("div",{className:"relative flex text-xs text-muted-foreground h-6",children:[a.days.map((t,s)=>{const r=P(t),o=I(t,x);return e.jsx("div",{className:`flex-1 border-r border-border/50 text-center flex items-center justify-center ${r?"bg-muted/30":""} ${o?"bg-primary/20 font-semibold text-primary":""}`,style:{width:`${d}px`},children:y(t,l>=1?"d":"d/M")},s)}),N!==null&&e.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-destructive",style:{left:`${N}px`}})]})]}),M.map(t=>{if(t.type==="subject")return e.jsxs("div",{className:"h-12 border-b border-border/50 flex items-center text-xs uppercase tracking-wide text-muted-foreground bg-muted/30 px-2",children:["Cronograma de ",t.subject]},t.key);const{item:s}=t,r=k(s.startDate),o=Math.max(A(s.startDate,s.endDate),d),n=L(f(s.date));return e.jsxs("div",{className:"relative h-10 border-b border-border/50",children:[a.days.map((i,g)=>e.jsx("div",{className:`absolute top-0 bottom-0 border-r border-border/50 ${P(i)?"bg-muted/30":"bg-background"}`,style:{left:`${g*d}px`,width:`${d}px`}},g)),N!==null&&e.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0 w-px bg-destructive z-30",style:{left:`${N}px`}}),e.jsxs("div",{className:`absolute top-1 bottom-1 ${s.color} bg-opacity-30 rounded border ${s.color.replace("bg-","border-")} flex items-center px-2 text-xs font-medium text-foreground truncate z-20`,style:{left:`${r}px`,width:`${o}px`},title:`Período de estudio: ${s.subject} - ${s.name}`,children:[s.studyDays," días"]}),e.jsx("div",{className:`absolute w-4 h-4 ${s.color} rounded-full border-2 border-white shadow-md z-40`,style:{left:`${n-8}px`,top:"8px"},title:`Entrega: ${y(f(s.date),"d 'de' MMMM",{locale:C})}`,children:e.jsx("div",{className:"absolute -top-5 left-1/2 transform -translate-x-1/2 text-xs whitespace-nowrap text-muted-foreground",children:y(f(s.date),l>=1?"d/MM":"d/M")})}),s.warning&&e.jsx("div",{className:"absolute -top-3 text-chart-3 text-xs font-semibold z-40",style:{left:`${r}px`},title:"Período de estudio muy corto",children:"⚠️"})]},t.key)})]})})]}),M.length===0&&e.jsx("div",{className:"pt-6 text-sm text-muted-foreground text-center",children:"No hay entregas programadas para el periodo visible."}),e.jsx("div",{className:"mt-6 pt-4 border-t border-border",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-3 bg-muted-foreground/30 border border-border rounded"}),e.jsx("span",{children:"Período de estudio"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 bg-muted-foreground rounded-full border-2 border-background shadow-md"}),e.jsx("span",{children:"Fecha de entrega"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-0.5 h-4 bg-destructive"}),e.jsx("span",{children:"Hoy"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-chart-3",children:"⚠️"}),e.jsx("span",{children:"Menos de 4 días de estudio"})]})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total de entregas"})]}),e.jsx("p",{className:"text-xl font-bold text-foreground mt-1",children:c.length})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Días totales de estudio"})]}),e.jsx("p",{className:"text-xl font-bold text-foreground mt-1",children:c.reduce((t,s)=>t+s.studyDays,0)})]}),e.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Promedio días/entrega"})]}),e.jsx("p",{className:"text-xl font-bold text-foreground mt-1",children:c.length>0?Math.round(c.reduce((t,s)=>t+s.studyDays,0)/c.length):0})]})]})]})]})};export{ee as default};
